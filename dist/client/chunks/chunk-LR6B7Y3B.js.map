{
  "version": 3,
  "sources": ["../../../src/runtime/vnode.gbln", "../../../src/index.gbln"],
  "sourcesContent": ["export const TEXT_TYPE = Symbol('GoblinText');\n\nexport type PrimitiveChild = string | number | boolean | null | undefined;\nexport type ComponentType<Props = Record<string, unknown>> = (props?: Props) => VNode | PrimitiveChild | Array<VNode | PrimitiveChild>;\nexport type VNodeType<Props = Record<string, unknown>> = string | ComponentType<Props> | typeof TEXT_TYPE;\n\nexport interface VNode<Props = Record<string, unknown>> {\n  type: VNodeType<Props>;\n  props: Props & { children?: VNodeChildren };\n  key: string | number | null;\n  el: Node | null;\n  children: NormalizedChildren;\n  shapeFlag: number;\n  appContext?: Record<string, unknown>;\n  component?: unknown;\n}\n\nexport type VNodeChild = VNode | PrimitiveChild;\nexport type VNodeChildren = VNodeChild | Array<VNodeChild>;\nexport type NormalizedChildren = Array<VNode | TextVNode>;\n\nexport interface TextVNode extends VNode {\n  type: typeof TEXT_TYPE;\n  children: string;\n}\n\nfunction normalizeChildren(children: Array<VNodeChild | Array<VNodeChild>>): NormalizedChildren {\n  const flat: NormalizedChildren = [];\n  for (const child of children) {\n    if (Array.isArray(child)) {\n      flat.push(...normalizeChildren(child as Array<VNodeChild | Array<VNodeChild>>));\n    } else if (child == null || child === false || child === true) {\n      continue;\n    } else if (typeof child === 'object') {\n      flat.push(child as VNode);\n    } else {\n      flat.push(createTextVNode(String(child)));\n    }\n  }\n  return flat;\n}\n\nexport function h<Props = Record<string, unknown>>(type: VNodeType<Props>, props: Props | null = null, ...children: Array<VNodeChild | Array<VNodeChild>>): VNode<Props> {\n  const normalizedChildren = normalizeChildren(children);\n  const key = props && (props as Record<string, unknown>).key != null ? (props as Record<string, unknown>).key : null;\n  const nextProps = props ? { ...(props as Record<string, unknown>) } : {};\n  if (key != null) {\n    delete (nextProps as Record<string, unknown>).key;\n  }\n  if (normalizedChildren.length > 0) {\n    (nextProps as Record<string, unknown>).children = normalizedChildren.length === 1 ? normalizedChildren[0] : normalizedChildren;\n  }\n  return {\n    type,\n    props: nextProps as Props & { children?: VNodeChildren },\n    key: key as string | number | null,\n    el: null,\n    children: normalizedChildren,\n    shapeFlag: typeof type === 'string' ? 1 : typeof type === 'function' ? 2 : 0\n  } as VNode<Props>;\n}\n\nexport function createTextVNode(text: string): TextVNode {\n  return {\n    type: TEXT_TYPE,\n    props: {} as Record<string, unknown> & { children?: VNodeChildren },\n    key: null,\n    el: null,\n    children: text,\n    shapeFlag: 0\n  } as TextVNode;\n}\n\nexport function isTextVNode(vnode: VNode | null | undefined): vnode is TextVNode {\n  return Boolean(vnode && vnode.type === TEXT_TYPE);\n}\n", "import type { VNode } from './runtime/vnode.gbln';\nimport { h } from './runtime/vnode.gbln';\n\nexport interface AppProps {\n  title: string;\n  features?: Array<string>;\n}\n\nexport function App(props: AppProps): VNode {\n  const featureItems = (props.features ?? []).map(label => h('li', { class: 'feature-item' }, label));\n  return h(\n    'main',\n    { class: 'goblin-app-shell' },\n    h('h1', null, props.title),\n    featureItems.length > 0\n      ? h('ul', { class: 'feature-list' }, featureItems)\n      : h('p', null, 'Configure features in src/index.gbln to see them here.')\n  );\n}\n\nexport interface RootRenderer {\n  render(target: HTMLElement, props: AppProps): VNode;\n}\n\nexport function createRoot(): RootRenderer {\n  return {\n    render(target, props) {\n      const vnode = App(props);\n      target.dispatchEvent(new CustomEvent('goblin:render', { detail: { vnode } }));\n      target.textContent = JSON.stringify(vnode, null, 2);\n      return vnode;\n    }\n  };\n}\n\nexport default App;\n"],
  "mappings": ";;;AAAO,IAAM,YAAY,OAAO,YAAY;AA0B5C,SAAS,kBAAkB,UAAqE;AAC9F,QAAM,OAA2B,CAAC;AAClC,aAAW,SAAS,UAAU;AAC5B,QAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,WAAK,KAAK,GAAG,kBAAkB,KAA8C,CAAC;AAAA,IAChF,WAAW,SAAS,QAAQ,UAAU,SAAS,UAAU,MAAM;AAC7D;AAAA,IACF,WAAW,OAAO,UAAU,UAAU;AACpC,WAAK,KAAK,KAAc;AAAA,IAC1B,OAAO;AACL,WAAK,KAAK,gBAAgB,OAAO,KAAK,CAAC,CAAC;AAAA,IAC1C;AAAA,EACF;AACA,SAAO;AACT;AAEO,SAAS,EAAmC,MAAwB,QAAsB,SAAS,UAA+D;AACvK,QAAM,qBAAqB,kBAAkB,QAAQ;AACrD,QAAM,MAAM,SAAU,MAAkC,OAAO,OAAQ,MAAkC,MAAM;AAC/G,QAAM,YAAY,QAAQ,EAAE,GAAI,MAAkC,IAAI,CAAC;AACvE,MAAI,OAAO,MAAM;AACf,WAAQ,UAAsC;AAAA,EAChD;AACA,MAAI,mBAAmB,SAAS,GAAG;AACjC,IAAC,UAAsC,WAAW,mBAAmB,WAAW,IAAI,mBAAmB,CAAC,IAAI;AAAA,EAC9G;AACA,SAAO;AAAA,IACL;AAAA,IACA,OAAO;AAAA,IACP;AAAA,IACA,IAAI;AAAA,IACJ,UAAU;AAAA,IACV,WAAW,OAAO,SAAS,WAAW,IAAI,OAAO,SAAS,aAAa,IAAI;AAAA,EAC7E;AACF;AAEO,SAAS,gBAAgB,MAAyB;AACvD,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO,CAAC;AAAA,IACR,KAAK;AAAA,IACL,IAAI;AAAA,IACJ,UAAU;AAAA,IACV,WAAW;AAAA,EACb;AACF;;;AC/DO,SAAS,IAAI,OAAwB;AAC1C,QAAM,gBAAgB,MAAM,YAAY,CAAC,GAAG,IAAI,WAAS,EAAE,MAAM,EAAE,OAAO,eAAe,GAAG,KAAK,CAAC;AAClG,SAAO;AAAA,IACL;AAAA,IACA,EAAE,OAAO,mBAAmB;AAAA,IAC5B,EAAE,MAAM,MAAM,MAAM,KAAK;AAAA,IACzB,aAAa,SAAS,IAClB,EAAE,MAAM,EAAE,OAAO,eAAe,GAAG,YAAY,IAC/C,EAAE,KAAK,MAAM,wDAAwD;AAAA,EAC3E;AACF;AAMO,SAAS,aAA2B;AACzC,SAAO;AAAA,IACL,OAAO,QAAQ,OAAO;AACpB,YAAM,QAAQ,IAAI,KAAK;AACvB,aAAO,cAAc,IAAI,YAAY,iBAAiB,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;AAC5E,aAAO,cAAc,KAAK,UAAU,OAAO,MAAM,CAAC;AAClD,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,IAAO,cAAQ;",
  "names": []
}
